<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>문화공감 카드 리스트</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --line: #eceef2;
        --ink: #111114;
        --primary: #2563eb;
        --bg-gray: #f8fafc;
      }

      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
        margin: 0;
        padding: 24px;
        color: var(--ink);
        background: var(--bg-gray);
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      h1 {
        margin: 0 0 8px;
        font-size: 28px;
        font-weight: 700;
        color: var(--ink);
      }

      .subtitle {
        margin: 0 0 24px;
        font-size: 16px;
        color: #64748b;
      }

      #status {
        margin: 8px 0 24px;
        padding: 12px 16px;
        background: white;
        border-radius: 8px;
        border: 1px solid var(--line);
        color: #475569;
        font-size: 14px;
      }

      .controls {
        margin: 0 0 24px;
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .btn {
        padding: 8px 16px;
        border: 1px solid var(--line);
        border-radius: 6px;
        background: white;
        color: var(--ink);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .btn:hover {
        background: var(--bg-gray);
        border-color: var(--primary);
      }

      .btn.primary {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .btn.primary:hover {
        background: #1d4ed8;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .event-card {
        border: 1px solid var(--line);
        border-radius: 16px;
        overflow: hidden;
        background: white;
        display: flex;
        flex-direction: column;
        transition: all 0.3s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .event-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border-color: var(--primary);
      }

      .event-card img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        display: block;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .event-content {
        padding: 16px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .event-title {
        font-size: 16px;
        font-weight: 600;
        line-height: 1.4;
        margin: 0 0 12px;
        color: var(--ink);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .event-description {
        font-size: 14px;
        color: #64748b;
        line-height: 1.5;
        margin: 0 0 16px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        flex: 1;
      }

      .event-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .event-date {
        font-size: 12px;
        color: #94a3b8;
      }

      .event-link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        font-size: 14px;
        color: var(--primary);
        text-decoration: none;
        border: 1px solid var(--primary);
        border-radius: 8px;
        transition: all 0.2s;
        font-weight: 500;
      }

      .event-link:hover {
        background: var(--primary);
        color: white;
      }

      .skeleton {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      .skeleton-card {
        border: 1px solid var(--line);
        border-radius: 16px;
        overflow: hidden;
        background: white;
      }

      .skeleton-img {
        width: 100%;
        height: 160px;
        background: #e2e8f0;
      }

      .skeleton-content {
        padding: 16px;
      }

      .skeleton-title {
        height: 20px;
        background: #e2e8f0;
        border-radius: 4px;
        margin-bottom: 12px;
      }

      .skeleton-desc {
        height: 16px;
        background: #f1f5f9;
        border-radius: 4px;
        margin-bottom: 8px;
      }

      .skeleton-desc.short {
        width: 60%;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #64748b;
      }

      .empty-state svg {
        width: 64px;
        height: 64px;
        margin-bottom: 16px;
        opacity: 0.5;
      }

      .error-state {
        background: #fef2f2;
        border: 1px solid #fecaca;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        color: #dc2626;
      }

      @media (max-width: 640px) {
        body {
          padding: 16px;
        }

        h1 {
          font-size: 24px;
        }

        .grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .controls {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>문화공감 새 소식</h1>
      <p class="subtitle">
        문화체육관광부에서 제공하는 최신 문화 정보를 확인하세요
      </p>

      <div class="controls">
        <button class="btn primary" onclick="loadCards()">새로고침</button>
        <button class="btn" onclick="loadMore()">더 보기</button>
        <select class="btn" onchange="changeLimit(this.value)">
          <option value="6">6개 보기</option>
          <option value="12">12개 보기</option>
          <option value="18">18개 보기</option>
        </select>
      </div>

      <div id="status">불러오는 중…</div>

      <div class="grid" id="grid">
        <!-- 스켈레톤 로딩 -->
      </div>
    </div>

    <script>
      // Mock API 데이터 (실제 환경에서는 실제 API 호출)
      const MOCK_DATA = {
        count: 25,
        items: [
          {
            title: "2024 대한민국 문화예술축제",
            description:
              "전국 각지에서 펼쳐지는 다채로운 문화예술 공연과 전시를 만나보세요.",
            link: "https://www.culture.go.kr/festival2024",
            pubDate: "2024-03-15",
            guid: "festival2024001",
          },
          {
            title: "한국 전통 공예 체험전",
            description:
              "조상들의 슬기로운 손끝에서 탄생한 전통 공예품을 직접 체험해볼 수 있습니다.",
            link: "https://www.culture.go.kr/craft-experience",
            pubDate: "2024-03-12",
            guid: "craft2024001",
          },
          {
            title: "청년 예술가 지원 사업 공모",
            description:
              "미래의 예술가들을 위한 창작 지원 프로그램에 참여해보세요.",
            link: "https://www.culture.go.kr/youth-artist",
            pubDate: "2024-03-10",
            guid: "youth2024001",
          },
          {
            title: "디지털 문화유산 아카이브",
            description:
              "첨단 기술로 보존되고 있는 우리나라 문화유산을 온라인에서 만나보세요.",
            link: "https://www.culture.go.kr/digital-heritage",
            pubDate: "2024-03-08",
            guid: "digital2024001",
          },
          {
            title: "지역 문화센터 네트워킹 포럼",
            description:
              "전국 문화센터 관계자들이 한자리에 모여 정보를 공유합니다.",
            link: "https://www.culture.go.kr/center-forum",
            pubDate: "2024-03-05",
            guid: "forum2024001",
          },
          {
            title: "K-컬처 해외 진출 설명회",
            description:
              "한류 문화를 세계로 확산시키는 다양한 지원 방안을 소개합니다.",
            link: "https://www.culture.go.kr/k-culture-global",
            pubDate: "2024-03-03",
            guid: "kculture2024001",
          },
          {
            title: "문화도시 조성 사업 발표",
            description:
              "지역 특색을 살린 문화도시 조성 계획이 공개되었습니다.",
            link: "https://www.culture.go.kr/culture-city",
            pubDate: "2024-03-01",
            guid: "city2024001",
          },
          {
            title: "국립박물관 특별전시",
            description:
              "희귀한 유물들을 한자리에서 볼 수 있는 특별 기획전이 열립니다.",
            link: "https://www.culture.go.kr/museum-special",
            pubDate: "2024-02-28",
            guid: "museum2024001",
          },
        ],
      };

      const grid = document.getElementById("grid");
      const statusEl = document.getElementById("status");
      let currentLimit = 6;
      let currentOffset = 0;

      function escapeHTML(str) {
        return String(str)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#039;");
      }

      function formatDate(dateStr) {
        try {
          const date = new Date(dateStr);
          return date.toLocaleDateString("ko-KR", {
            year: "numeric",
            month: "long",
            day: "numeric",
          });
        } catch {
          return dateStr;
        }
      }

      function createSkeletonCard() {
        return `
        <div class="skeleton-card skeleton">
          <div class="skeleton-img"></div>
          <div class="skeleton-content">
            <div class="skeleton-title"></div>
            <div class="skeleton-desc"></div>
            <div class="skeleton-desc short"></div>
          </div>
        </div>
      `;
      }

      function showSkeletonLoading() {
        grid.innerHTML = Array(6).fill(createSkeletonCard()).join("");
      }

      function createEventCard(item) {
        const article = document.createElement("article");
        article.className = "event-card";

        // 플레이스홀더 이미지 (그라디언트 배경)
        const img = document.createElement("div");
        img.style.cssText = `
        width: 100%;
        height: 160px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        font-weight: 600;
      `;
        img.textContent = "문화공감";

        const content = document.createElement("div");
        content.className = "event-content";

        const title = document.createElement("h3");
        title.className = "event-title";
        title.textContent = item.title || "";

        const description = document.createElement("p");
        description.className = "event-description";
        description.textContent = item.description || "";

        const meta = document.createElement("div");
        meta.className = "event-meta";

        const date = document.createElement("span");
        date.className = "event-date";
        date.textContent = formatDate(item.pubDate);

        const link = document.createElement("a");
        link.className = "event-link";
        link.href = item.link || "#";
        link.target = "_blank";
        link.rel = "noopener";
        link.innerHTML = "자세히 보기 <span>→</span>";

        meta.appendChild(date);
        content.appendChild(title);
        content.appendChild(description);
        content.appendChild(meta);
        content.appendChild(link);

        article.appendChild(img);
        article.appendChild(content);

        return article;
      }

      async function loadCards(reset = true) {
        try {
          if (reset) {
            currentOffset = 0;
            showSkeletonLoading();
          }

          statusEl.textContent = "불러오는 중…";

          // 실제 환경에서는 이 부분을 실제 API 호출로 교체
          await new Promise((resolve) => setTimeout(resolve, 800)); // 로딩 시뮬레이션

          const startIndex = reset ? 0 : currentOffset;
          const endIndex = startIndex + currentLimit;
          const items = MOCK_DATA.items.slice(startIndex, endIndex);

          if (reset) {
            grid.innerHTML = "";
          }

          statusEl.textContent = `총 ${MOCK_DATA.count}건 중 ${Math.min(
            endIndex,
            MOCK_DATA.items.length
          )}건 표시`;

          if (items.length === 0) {
            if (reset) {
              grid.innerHTML = `
              <div class="empty-state">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <h3>표시할 내용이 없습니다</h3>
                <p>새로운 문화 소식을 기다려주세요.</p>
              </div>
            `;
            }
            return;
          }

          // 카드들을 순차적으로 애니메이션과 함께 추가
          items.forEach((item, index) => {
            setTimeout(() => {
              const card = createEventCard(item);
              card.style.opacity = "0";
              card.style.transform = "translateY(20px)";
              grid.appendChild(card);

              // 페이드인 애니메이션
              requestAnimationFrame(() => {
                card.style.transition = "all 0.4s ease";
                card.style.opacity = "1";
                card.style.transform = "translateY(0)";
              });
            }, index * 100);
          });

          if (!reset) {
            currentOffset = endIndex;
          }
        } catch (e) {
          console.error(e);
          statusEl.textContent = "";
          grid.innerHTML = `
          <div class="error-state">
            <h3>불러오기에 실패했습니다</h3>
            <p>잠시 후 다시 시도해 주세요.</p>
            <button class="btn primary" onclick="loadCards()" style="margin-top: 12px;">다시 시도</button>
          </div>
        `;
        }
      }

      function loadMore() {
        loadCards(false);
      }

      function changeLimit(newLimit) {
        currentLimit = parseInt(newLimit);
        loadCards(true);
      }

      // 초기 로드
      loadCards();
    </script>
  </body>
</html>
